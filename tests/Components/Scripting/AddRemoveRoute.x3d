<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.3//EN" "http://www.web3d.org/specifications/x3d-3.3.dtd">
<X3D profile='Full' version='3.3' xmlns:xsd='http://www.w3.org/2001/XMLSchema-instance' xsd:noNamespaceSchemaLocation='http://www.web3d.org/specifications/x3d-3.3.xsd'>
  <head>
    <meta name='comment' content='World of Titania'/>
    <meta name='created' content='Mon, 10 Oct 2016 07:46:53 GMT'/>
    <meta name='creator' content='Holger Seelig'/>
    <meta name='generator' content='Titania V2.0.1, http://titania.create3000.de'/>
    <meta name='identifier' content='file:///home/holger/Projekte/Cobweb/cobweb.js/tests/Components/Scripting/AddRemoveRoute.x3d'/>
    <meta name='modified' content='Mon, 10 Oct 2016 07:54:53 GMT'/>
  </head>
  <Scene>
    <WorldInfo>
      <MetadataSet DEF='Titania'
          name='Titania'
          reference='http://titania.create3000.de'>
        <MetadataSet DEF='AngleGrid' containerField='value'
            name='AngleGrid'
            reference='http://titania.create3000.de'>
          <MetadataBoolean DEF='enabled' containerField='value'
              name='enabled'
              reference='http://titania.create3000.de'
              value='false'/>
        </MetadataSet>
        <MetadataSet DEF='Grid' containerField='value'
            name='Grid'
            reference='http://titania.create3000.de'>
          <MetadataBoolean DEF='enabled_1' containerField='value'
              name='enabled'
              reference='http://titania.create3000.de'
              value='true'/>
        </MetadataSet>
        <MetadataSet DEF='NavigationInfo' containerField='value'
            name='NavigationInfo'
            reference='http://titania.create3000.de'>
          <MetadataString DEF='type' containerField='value'
              name='type'
              reference='http://titania.create3000.de'
              value='"EXAMINE"'/>
        </MetadataSet>
        <MetadataSet DEF='Viewpoint' containerField='value'
            name='Viewpoint'
            reference='http://titania.create3000.de'>
          <MetadataDouble DEF='position' containerField='value'
              name='position'
              reference='http://titania.create3000.de'
              value='6.30706691741943, 7.69342184066772, 13.0127201080322'/>
          <MetadataDouble DEF='orientation' containerField='value'
              name='orientation'
              reference='http://titania.create3000.de'
              value='-0.736428989826333, 0.662876617133501, 0.13515521965878, 0.65899033854626'/>
          <MetadataDouble DEF='centerOfRotation' containerField='value'
              name='centerOfRotation'
              reference='http://titania.create3000.de'
              value='-1.77635683940025e-15, -7.105427357601e-15, 3.5527136788005e-15'/>
        </MetadataSet>
        <MetadataSet DEF='Selection' containerField='value'
            name='Selection'
            reference='http://titania.create3000.de'>
          <MetadataSet DEF='previous' containerField='value'
              name='previous'
              reference='http://titania.create3000.de'/>
          <MetadataSet DEF='children' containerField='value'
              name='children'
              reference='http://titania.create3000.de'>
            <PositionInterpolator DEF='ConeTranslationInterpolator' containerField='value'
                key='0, 1'
                keyValue='-5 0 0, 5 0 0'>
              <MetadataSet DEF='Interpolator'
                  name='Interpolator'
                  reference='http://titania.create3000.de'>
                <MetadataInteger DEF='key' containerField='value'
                    name='key'
                    reference='http://titania.create3000.de'
                    value='0, 100'/>
                <MetadataDouble DEF='keyValue' containerField='value'
                    name='keyValue'
                    reference='http://titania.create3000.de'
                    value='-5, 0, 0, 5, 0, 0'/>
                <MetadataString DEF='keyType' containerField='value'
                    name='keyType'
                    reference='http://titania.create3000.de'
                    value='"LINEAR", "LINEAR"'/>
              </MetadataSet>
            </PositionInterpolator>
          </MetadataSet>
        </MetadataSet>
      </MetadataSet>
    </WorldInfo>
    <Transform DEF='Cone'
        translation='-2.67214 0 0'
        rotation='1.13686837720849e-13 3.673205355856e-06 -0.999999999993254 1.57079614798096'
        scale='1 1 1'
        scaleOrientation='3.87058675693116e-05 -1.42119420473756e-05 -0.999999999149938 0.0639350124158785'>
      <Group DEF='Animation'>
        <MetadataSet DEF='Animation_1'
            name='Animation'
            reference='http://titania.create3000.de'>
          <MetadataInteger DEF='duration' containerField='value'
              name='duration'
              reference='http://titania.create3000.de'
              value='100'/>
          <MetadataInteger DEF='framesPerSecond' containerField='value'
              name='framesPerSecond'
              reference='http://titania.create3000.de'
              value='10'/>
        </MetadataSet>
        <TimeSensor DEF='Timer'
            cycleInterval='10'
            loop='true'/>
        <PositionInterpolator USE='ConeTranslationInterpolator'/>
      </Group>
      <Shape>
        <Appearance>
          <Material/>
        </Appearance>
        <Cone/>
      </Shape>
    </Transform>
    <Viewpoint DEF='_1'
        description='Home'
        position='6.30707 7.69342 13.0127'
        orientation='-0.736428989826333 0.662876617133501 0.13515521965878 0.65899033854626'
        centerOfRotation='-1.77636e-15 -7.10543e-15 3.55271e-15'/>
    <Transform>
      <TouchSensor DEF='_2'/>
      <Transform DEF='Box'
          translation='-5 0 5'
          scale='0.45081 0.45081 0.45081'>
        <Shape>
          <Appearance>
            <Material DEF='Rococo28'
                ambientIntensity='0.226102'
                diffuseColor='0.279645 0.904409 0.511589'
                specularColor='0.0955906 0.0955906 0.0955906'
                shininess='0.078125'/>
          </Appearance>
          <Box/>
        </Shape>
      </Transform>
    </Transform>
    <Transform>
      <TouchSensor DEF='_3'/>
      <Transform DEF='Box_1'
          translation='-3 0 5'
          scale='0.45081 0.45081 0.45081'>
        <Shape>
          <Appearance>
            <Material DEF='Rococo12'
                ambientIntensity='0.226102'
                diffuseColor='0.904409 0.146366 0.208768'
                specularColor='0.0955906 0.0955906 0.0955906'
                shininess='0.078125'/>
          </Appearance>
          <Box/>
        </Shape>
      </Transform>
    </Transform>
    <Script DEF='AddRemoveRouteScript'>
      <field accessType='inputOnly' type='SFTime' name='addRoute'/>
      <field accessType='inputOnly' type='SFTime' name='deleteRoute'/>
<![CDATA[ecmascript:

function addRoute ()
{
	var
		currentScene = Browser .currentScene,
		fromNode     = currentScene .getNamedNode ("Timer"),
		toNode       = currentScene .getNamedNode ("ConeTranslationInterpolator");

	Browser .addRoute (fromNode, "fraction_changed", toNode, "set_fraction");
}

function deleteRoute ()
{
	var
		currentScene = Browser .currentScene,
		fromNode     = currentScene .getNamedNode ("Timer"),
		toNode       = currentScene .getNamedNode ("ConeTranslationInterpolator");
	
	Browser .deleteRoute (fromNode, "fraction_changed", toNode, "set_fraction");
}]]> 
    </Script>
    <ROUTE fromNode='Timer' fromField='fraction_changed' toNode='ConeTranslationInterpolator' toField='set_fraction'/>
    <ROUTE fromNode='ConeTranslationInterpolator' fromField='value_changed' toNode='Cone' toField='set_translation'/>
    <ROUTE fromNode='_2' fromField='touchTime' toNode='AddRemoveRouteScript' toField='addRoute'/>
    <ROUTE fromNode='_3' fromField='touchTime' toNode='AddRemoveRouteScript' toField='deleteRoute'/>
  </Scene>
</X3D>
