<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.3//EN" "http://www.web3d.org/specifications/x3d-3.3.dtd">
<X3D profile='Full' version='3.3' xmlns:xsd='http://www.w3.org/2001/XMLSchema-instance' xsd:noNamespaceSchemaLocation='http://www.web3d.org/specifications/x3d-3.3.xsd'>
  <head>
    <meta name='comment' content='World of Titania'/>
    <meta name='created' content='Sat, 19 Dec 2015 09:16:40 GMT'/>
    <meta name='creator' content='Holger Seelig'/>
    <meta name='generator' content='Titania V2.0.1, http://titania.create3000.de'/>
    <meta name='identifier' content='file:///home/holger/Projekte/Cobweb/cobweb.js/tests/Components/Rendering/bubbles.x3d'/>
    <meta name='modified' content='Thu, 20 Oct 2016 10:51:23 GMT'/>
  </head>
  <Scene>
    <WorldInfo>
      <MetadataSet DEF='Titania'
          name='Titania'
          reference='http://titania.create3000.de'>
        <MetadataSet DEF='NavigationInfo' containerField='value'
            name='NavigationInfo'
            reference='http://titania.create3000.de'>
          <MetadataString DEF='type' containerField='value'
              name='type'
              reference='http://titania.create3000.de'
              value='"EXAMINE"'/>
        </MetadataSet>
        <MetadataSet DEF='Viewpoint' containerField='value'
            name='Viewpoint'
            reference='http://titania.create3000.de'>
          <MetadataDouble DEF='position' containerField='value'
              name='position'
              reference='http://titania.create3000.de'
              value='4.67802000045776, 5.38116979598999, 14.5215997695923'/>
          <MetadataDouble DEF='orientation' containerField='value'
              name='orientation'
              reference='http://titania.create3000.de'
              value='0, 0, 1, 0'/>
          <MetadataDouble DEF='centerOfRotation' containerField='value'
              name='centerOfRotation'
              reference='http://titania.create3000.de'
              value='4.67802000045776, 5.38116979598999, -9.53673975345737e-07'/>
        </MetadataSet>
        <MetadataSet DEF='Selection' containerField='value'
            name='Selection'
            reference='http://titania.create3000.de'>
          <MetadataSet DEF='children' containerField='value'
              name='children'
              reference='http://titania.create3000.de'>
            <FontStyle DEF='_1' containerField='value'
                family='"SANS"'
                justify='"END"'/>
          </MetadataSet>
          <MetadataSet DEF='previous' containerField='value'
              name='previous'
              reference='http://titania.create3000.de'/>
        </MetadataSet>
        <MetadataSet DEF='LayerSet' containerField='value'
            name='LayerSet'
            reference='http://titania.create3000.de'>
          <MetadataInteger DEF='activeLayer' containerField='value'
              name='activeLayer'
              reference='http://titania.create3000.de'
              value='-1'/>
        </MetadataSet>
      </MetadataSet>
    </WorldInfo>
    <LayerSet
        activeLayer='1'
        order='1, 2'>
      <Layer>
        <Background DEF='Gray'
            skyColor='0.2 0.2 0.2'/>
        <Viewpoint
            description='Initial View'
            position='4.67802 5.38117 14.5216'
            centerOfRotation='4.67802 5.38117 -9.53674e-07'/>
        <Transform DEF='PointSet'
            translation='-5.56507 -0.0667507 0'
            scale='20.2666 11.168 10.218'>
          <Shape>
            <Appearance>
              <LineProperties DEF='_2'
                  linewidthScaleFactor='69.9584'/>
              <Material
                  emissiveColor='1 0 0'/>
            </Appearance>
            <PointSet>
              <ColorRGBA DEF='_3'
                  color='0.699491 0.630907 0.358628 0.276681, 0.573119 0.844698 0.134196 0.0296546, 0.769427 0.0385386 0.0614378 0.0805076, 0.227262 0.533166 0.395349 0.352103, 0.93272 0.950188 0.989277 0.121062, 0.457541 0.131913 0.0425553 0.0850668, 0.658433 0.856607 0.933689 0.338556, 0.246498 0.469919 0.581353 0.0408528, 0.902938 0.0874489 0.866957 0.383165, 0.538442 0.934947 0.735093 0.37579, 0.390293 0.514977 0.668994 0.149293, 0.833374 0.112707 0.725061 0.0200883, 0.908081 0.821881 0.47301 0.403819, 0.476645 0.835076 0.338895 0.413944, 0.886682 0.629808 0.979568 0.0239596, 0.846125 0.912148 0.191498 0.375725, 0.183392 0.618743 0.96982 0.0300047, 0.182745 0.0228551 0.315752 0.211132, 0.466614 0.698662 0.713086 0.411425, 0.73589 0.141784 0.208623 0.173132, 0.818742 0.903803 0.766035 0.339522, 0.971718 0.621537 0.941732 0.313189, 0.165862 0.108907 0.646254 0.240189, 0.267569 0.760731 0.885855 0.267363, 0.0911728 0.838295 0.019871 0.12355, 0.516127 0.00854022 0.879127 0.0745505, 0.891963 0.314665 0.143497 0.0751589, 0.545236 0.973437 0.532975 0.319665, 0.917519 0.481651 0.367328 0.214932, 0.1922 0.233222 0.246561 0.0650617, 0.217951 0.99628 0.0698208 0.0453226, 0.769438 0.338592 0.911111 0.285641, 0.51868 0.408577 0.398854 0.480736, 0.593143 0.795361 0.329767 0.457679, 0.102213 0.85507 0.631062 0.22414, 0.678109 0.909042 0.51085 0.478235, 0.928345 0.58331 0.690596 0.164387, 0.376576 0.777884 0.917477 0.464786, 0.193337 0.12819 0.210817 0.293168, 0.524036 0.746371 0.471391 0.30885, 0.0500374 0.465473 0.360765 0.153814, 0.899229 0.0460838 0.187808 0.42067, 0.834038 0.650767 0.112107 0.152423, 0.711864 0.522051 0.947959 0.111692, 0.143284 0.829043 0.461717 0.460771, 0.534792 0.771416 0.828228 0.0579378, 0.937242 0.608006 0.115179 0.403303, 0.406694 0.407667 0.227828 0.229997, 0.821636 0.442459 0.738902 0.119246, 0.476582 0.270359 0.379261 0.134388, 0.298555 0.211435 0.945205 0.038533, 0.850606 0.391033 0.851861 0.219136, 0.539836 0.896031 0.523562 0.0550394, 0.610525 0.445324 0.928978 0.352643, 0.620384 0.694404 0.942372 0.320235, 0.112273 0.21912 0.437419 0.0336925, 0.666054 0.347979 0.0955748 0.311979, 0.517696 0.305245 0.376642 0.236267, 0.558672 0.867311 0.0681848 0.132217, 0.589712 0.906067 0.810702 0.305747, 0.838004 0.621337 0.834428 0.234959, 0.835934 0.395202 0.884992 0.0447136, 0.332545 0.419678 0.885837 0.156148, 0.240535 0.633919 0.905083 0.0692894, 0.706501 0.866478 0.317497 0.197978, 0.244356 0.838118 0.525477 0.408469, 0.0471268 0.823729 0.973497 0.325063, 0.374295 0.554426 0.366633 0.178585, 0.656999 0.660841 0.638405 0.140085, 0.347195 0.966851 0.460919 0.104035, 0.872147 0.126896 0.510635 0.366281, 0.53387 0.128364 0.434201 0.184625, 0.284076 0.61164 0.866195 0.341974, 0.418321 0.216943 0.532131 0.147525, 0.693556 0.7296 0.409543 0.158795, 0.162001 0.409723 0.777709 0.228384, 0.995514 0.277864 0.625206 0.230089, 0.29391 0.900515 0.438597 0.302934, 0.750507 0.27719 0.197458 0.1621, 0.44509 0.362909 0.991149 0.44812, 0.408002 0.678037 0.64079 0.3025, 0.555109 0.19555 0.782221 0.105342, 0.69574 0.300081 0.864788 0.375755, 0.567989 0.485483 0.354011 0.358202, 0.885079 0.707575 0.946489 0.404773, 0.763513 0.273047 0.185638 0.016378, 0.555436 0.775667 0.0579911 0.0901518, 0.255906 0.495876 0.219837 0.421733, 0.462543 0.194603 0.808411 0.38823, 0.126281 0.0901413 0.692376 0.408071, 0.596873 0.643659 0.186765 0.266053, 0.543519 0.594349 0.615109 0.230294, 0.198395 0.0448637 0.942572 0.493291, 0.788199 0.450269 0.102998 0.343381, 0.283062 0.801746 0.41101 0.200969, 0.0491639 0.644616 0.467894 0.275843, 0.784258 0.381487 0.0396135 0.491319, 0.715722 0.153852 0.813557 0.177022, 0.700251 0.759318 0.776879 0.435746, 0.277342 0.961612 0.220995 0.498153'/>
              <Coordinate DEF='_4'
                  point='0.458766 0.00550924 0, 0.753938 0.258512 0, 0.383757 0.343332 0, 0.604524 0.000511925 0, 0.0474525 0.00199591 0, 0.671614 0.259002 0, 0.330236 0.822678 0, 0.508 0.311543 0, 0.291193 0 0, 0.522465 0.133083 0, 0.742495 0.0521672 0, 0.783336 0.337508 0, 0.060752 0.0522262 0, 0.242035 0.314586 0, 0.00458576 0.0595247 0, 0.483633 0.127396 0, 0.304368 0.518767 0, 0.759118 0.0011393 0, 0.354728 0.0464741 0, 0.355129 0.115958 0, 0.54805 0.0978877 0, 0.524664 0.122474 0, 0.508725 0.129561 0, 0.0146048 0.897389 0, 0.650729 0.0209603 0, 0.649174 0.0402993 0, 0.884479 0.16808 0, 0.307115 0.568246 0, 0.531561 0.493854 0, 0.837002 0.707196 0, 0.324868 0.827778 0, 0.710048 0.817273 0, 0.437686 0.226671 0, 0.680295 0.205281 0, 0.19813 0.723432 0, 0.711576 0.237141 0, 0.660179 0.001134 0, 0.0215975 0.43553 0, 0.0652864 0.300393 0, 0.250812 0.402486 0, 0.913573 0.0383478 0, 0.423564 0.167979 0, 0.790329 0.0157399 0, 0.0459943 0.44064 0, 0.0635661 0.570135 0, 0.407503 0.0842523 0, 0.472142 0.602801 0, 0.999045 0.0547993 0, 0.00558404 0.00485624 0, 0.438296 0.022568 0, 0.52775 0.0274797 0, 0.872677 0.059858 0, 0.28932 0.517015 0, 0.457361 0.482109 0, 0.94579 0.308435 0, 0.385227 0.600782 0, 0.670593 0.00927656 0, 0.595884 0.902089 0, 0.0468652 0.127019 0, 0.253949 0.018399 0, 0.478543 0.387622 0, 0.835727 0.551591 0, 0.883476 0.0675936 0, 0.692633 0.776892 0, 0.939025 0.969213 0, 0.789972 0.0843095 0, 0.701316 0.271104 0, 0.543395 0.35062 0, 0.441031 0.784349 0, 0.258989 0.660307 0, 0.805818 0.0016862 0, 0.321204 0.171792 0, 0.312154 0.191882 0, 0.507017 0.0550644 0, 0.456143 0.119996 0, 0.113705 0.0266992 0, 0.836581 0.386993 0, 0.368799 0.186458 0, 0.203526 0.655078 0, 0.237516 0.157538 0, 0.499531 0.00199092 0, 0.0176171 0.116151 0, 0.191934 0.303288 0, 0.728766 0.584337 0, 0.0208586 0.0105962 0, 0.856879 0.0969769 0, 0.540803 0.0587001 0, 0.930832 0.279794 0, 0.705418 0.0296509 0, 0.727761 0.860993 0, 0.575898 0.38317 0, 0.158811 0.910127 0, 0.621086 0.00387268 0, 0.242991 0.0803107 0, 0.649753 0.3994 0, 0.890352 0.460748 0, 0.858949 0.498218 0, 0.287885 0.0472575 0, 0.426506 0.0164488 0, 0.223912 0.338926 0'/>
            </PointSet>
          </Shape>
        </Transform>
        <TimeSensor DEF='_5'
            loop='true'/>
        <Script DEF='BubblesScript'>
          <field accessType='inputOnly' type='SFTime' name='set_time'/>
          <field accessType='inputOutput' type='SFInt32' name='numParticles' value='100'/>
          <field accessType='inputOutput' type='SFFloat' name='transparency' value='0.5'/>
          <field accessType='initializeOnly' type='SFNode' name='color'>
            <ColorRGBA USE='_3'/>
          </field>
          <field accessType='initializeOnly' type='SFNode' name='coord'>
            <Coordinate USE='_4'/>
          </field>
<![CDATA[ecmascript:

var velocity     = new MFFloat ();
var acceleration = new MFFloat ();

function initialize ()
{
	set_numParticles ();
}

function set_numParticles ()
{
	velocity     .length = numParticles;
	acceleration .length = numParticles;
	color .color .length = numParticles;
	coord .point .length = numParticles;

	for (var i = 0; i < numParticles; ++ i)
		set_particle (i);
}

function set_particle (i)
{
	velocity [i]     = 0;
	acceleration [i] = Math .random ();

	color .color [i] = new SFColorRGBA (Math .random (),
	                                    Math .random (),
	                                    Math .random (),
	                                    Math .random () * transparency);
	                                    
	coord .point [i] .x = Math .random ();
	coord .point [i] .y = 0;
}

function set_time ()
{
	var dt = 1 / Browser .currentFrameRate;
	
	for (var i = 0; i < numParticles; ++ i)
	{
		var dv = acceleration [i] * dt;
		velocity [i] += dv;
	
		coord .point [i] .y += velocity [i] * dt;
		
		if (coord .point [i] .y > 1)
			set_particle (i);
	}
}]]> 
        </Script>
      </Layer>
      <Layer>
        <MetadataSet DEF='Titania_1'
            name='Titania'
            reference='http://titania.create3000.de'>
          <MetadataSet DEF='Grid' containerField='value'
              name='Grid'
              reference='http://titania.create3000.de'>
            <MetadataBoolean containerField='value'
                name='enabled'
                reference='http://titania.create3000.de'
                value='true'/>
            <MetadataFloat containerField='value'
                name='rotation'
                reference='http://titania.create3000.de'
                value='1, 0, 0, 1.5708'/>
            <MetadataFloat containerField='value'
                name='scale'
                reference='http://titania.create3000.de'
                value='0.049, 0.049, 0.049'/>
            <MetadataInteger containerField='value'
                name='dimension'
                reference='http://titania.create3000.de'
                value='73, 10, 41'/>
            <MetadataInteger containerField='value'
                name='majorLineEvery'
                reference='http://titania.create3000.de'
                value='5, 5, 5, 5, 0, 5'/>
            <MetadataInteger containerField='value'
                name='majorLineOffset'
                reference='http://titania.create3000.de'
                value='0, 0, -5, -1, 0, -6'/>
            <MetadataFloat containerField='value'
                name='lineColor'
                reference='http://titania.create3000.de'
                value='1, 0.7, 0.7, 0.0588235'/>
          </MetadataSet>
          <MetadataSet DEF='AngleGrid' containerField='value'
              name='AngleGrid'
              reference='http://titania.create3000.de'>
            <MetadataBoolean containerField='value'
                name='enabled'
                reference='http://titania.create3000.de'
                value='false'/>
          </MetadataSet>
        </MetadataSet>
        <OrthoViewpoint/>
        <Transform DEF='Header'
            translation='-1.6905 0.955504 -1'
            scale='0.0672307 0.0672307 0.0672307'>
          <Shape>
            <Appearance>
              <Material/>
            </Appearance>
            <Text
                string='"Smarty Bubbles"'
                solid='true'>
              <FontStyle
                  family='"SANS"'
                  size='1.61'
                  justify='"BEGIN", "BEGIN"'/>
            </Text>
          </Shape>
        </Transform>
        <Group DEF='BubblesMenu'>
          <Transform DEF='Header_1'
              translation='1.6905 -0.759496 -1'
              scale='0.0672307 0.0672307 0.0672307'>
            <Shape>
              <Appearance>
                <Material DEF='Artdeco31'
                    ambientIntensity='0'
                    diffuseColor='0 0 0'
                    shininess='0'/>
              </Appearance>
              <Text
                  string='"Bubbles"'
                  solid='true'>
                <FontStyle
                    family='"SANS"'
                    style='BOLD'
                    size='0.68'
                    justify='"END"'/>
              </Text>
            </Shape>
          </Transform>
          <Transform DEF='numParticlesText'
              translation='1.6905 -0.955496 -1'
              scale='0.0672307 0.0672307 0.0672307'>
            <Shape>
              <Appearance>
                <Material/>
              </Appearance>
              <Text DEF='_6'
                  string='"numParticles 100"'
                  solid='true'>
                <FontStyle
                    family='"SANS"'
                    justify='"END"'/>
              </Text>
            </Shape>
          </Transform>
          <Transform DEF='numParticlesSlider'
              translation='0.0735 -0.9285 -3.51117e-06'
              center='0 -0.027 0'>
            <Transform DEF='IndexedLineSet'>
              <Shape>
                <Appearance>
                  <LineProperties
                      linewidthScaleFactor='2'/>
                  <Material DEF='Artdeco31_1'
                      emissiveColor='0.721 0.721 0.721'/>
                </Appearance>
                <IndexedLineSet
                    colorPerVertex='false'
                    coordIndex='0, 1, -1'>
                  <Coordinate
                      point='0 0 0, 1 0 0'/>
                </IndexedLineSet>
              </Shape>
            </Transform>
            <Transform>
              <Transform DEF='Rectangle2D'
                  translation='0.184767 0 0'
                  scale='0.027 0.0267372 0.0267372'>
                <Shape>
                  <Appearance>
                    <Material/>
                  </Appearance>
                  <Disk2D/>
                </Shape>
              </Transform>
              <PlaneSensor DEF='_7'
                  offset='0.184767 0 0'
                  maxPosition='1 0'/>
            </Transform>
          </Transform>
          <Transform DEF='pointSizeText'
              translation='1.6905 -0.857496 -1'
              scale='0.0672307 0.0672307 0.0672307'>
            <Shape>
              <Appearance>
                <Material/>
              </Appearance>
              <Text DEF='_8'
                  string='"pointSize 69"'
                  solid='true'>
                <FontStyle USE='_1'/>
              </Text>
            </Shape>
          </Transform>
          <Transform DEF='pointSizeSlider'
              translation='0.2205 -0.8305 -3.15105e-06'
              center='0 -0.027 0'>
            <Transform DEF='IndexedLineSet_1'>
              <Shape>
                <Appearance>
                  <LineProperties
                      linewidthScaleFactor='2'/>
                  <Material DEF='Artdeco31_2'
                      emissiveColor='0.721 0.721 0.721'/>
                </Appearance>
                <IndexedLineSet
                    colorPerVertex='false'
                    coordIndex='0, 1, -1'>
                  <Coordinate
                      point='0 0 0, 1 0 0'/>
                </IndexedLineSet>
              </Shape>
            </Transform>
            <Transform>
              <Transform DEF='Rectangle2D_1'
                  translation='0.696549 0 0'
                  scale='0.027 0.0267372 0.0267372'>
                <Shape>
                  <Appearance>
                    <Material/>
                  </Appearance>
                  <Disk2D/>
                </Shape>
              </Transform>
              <PlaneSensor DEF='_9'
                  offset='0.696549 0 0'
                  maxPosition='1 0'/>
            </Transform>
            <Group>
              <Group DEF='Animation'>
                <MetadataSet DEF='Animation_1'
                    name='Animation'
                    reference='http://titania.create3000.de'>
                  <MetadataInteger DEF='duration' containerField='value'
                      name='duration'
                      reference='http://titania.create3000.de'
                      value='68'/>
                  <MetadataInteger DEF='framesPerSecond' containerField='value'
                      name='framesPerSecond'
                      reference='http://titania.create3000.de'
                      value='10'/>
                </MetadataSet>
                <TimeSensor DEF='_10'
                    cycleInterval='6.8'
                    loop='true'
                    startTime='1450552664.38374'
                    resumeTime='1450546905.08543'
                    pauseTime='1450546916.44882'
                    stopTime='1450552664.38373'/>
                <PositionInterpolator DEF='pointSizeScriptSet_translationInterpolator'
                    key='0, 0.0147059, 0.0294118, 0.0441176, 0.0588235, 0.0735294, 0.0882353, 0.102941, 0.117647, 0.132353, 0.147059, 0.161765, 0.176471, 0.191176, 0.205882, 0.220588, 0.235294, 0.25, 0.264706, 0.279412, 0.294118, 0.308824, 0.323529, 0.338235, 0.352941, 0.367647, 0.382353, 0.397059, 0.411765, 0.426471, 0.441176, 0.455882, 0.470588, 0.485294, 0.5, 0.514706, 0.529412, 0.544118, 0.558824, 0.573529, 0.588235, 0.602941, 0.617647, 0.632353, 0.647059, 0.661765, 0.676471, 0.691176, 0.705882, 0.720588, 0.735294, 0.75, 0.764706, 0.779412, 0.794118, 0.808824, 0.823529, 0.838235, 0.852941, 0.867647, 0.882353, 0.897059, 0.911765, 0.926471, 0.941176, 0.955882, 0.970588, 0.985294, 1'
                    keyValue='0.200605 0 0, 0.202642 0 0, 0.208588 0 0, 0.2182 0 0, 0.231232 0 0, 0.247441 0 0, 0.266581 0 0, 0.288408 0 0, 0.312679 0 0, 0.339147 0 0, 0.367569 0 0, 0.3977 0 0, 0.429295 0 0, 0.462111 0 0, 0.495902 0 0, 0.530424 0 0, 0.565432 0 0, 0.600683 0 0, 0.63593 0 0, 0.670931 0 0, 0.70544 0 0, 0.739212 0 0, 0.772004 0 0, 0.803571 0 0, 0.833668 0 0, 0.86205 0 0, 0.888474 0 0, 0.912694 0 0, 0.934466 0 0, 0.953546 0 0, 0.969689 0 0, 0.98265 0 0, 0.992186 0 0, 0.99805 0 0, 1 0 0, 0.997866 0 0, 0.991808 0 0, 0.982071 0 0, 0.968899 0 0, 0.95254 0 0, 0.933237 0 0, 0.911238 0 0, 0.886786 0 0, 0.860128 0 0, 0.831508 0 0, 0.801174 0 0, 0.769369 0 0, 0.736339 0 0, 0.70233 0 0, 0.667588 0 0, 0.632357 0 0, 0.596883 0 0, 0.561412 0 0, 0.526189 0 0, 0.49146 0 0, 0.457469 0 0, 0.424463 0 0, 0.392687 0 0, 0.362387 0 0, 0.333807 0 0, 0.307193 0 0, 0.282792 0 0, 0.260847 0 0, 0.241605 0 0, 0.225311 0 0, 0.212211 0 0, 0.20255 0 0, 0.196573 0 0, 0.194526 0 0'>
                  <MetadataSet DEF='Interpolator'
                      name='Interpolator'
                      reference='http://titania.create3000.de'>
                    <MetadataInteger DEF='key' containerField='value'
                        name='key'
                        reference='http://titania.create3000.de'
                        value='0, 34, 68'/>
                    <MetadataDouble DEF='keyValue' containerField='value'
                        name='keyValue'
                        reference='http://titania.create3000.de'
                        value='0.20060533285141, 0, 0, 1, 0, 0, 0.194526299834251, 0, 0'/>
                    <MetadataString DEF='keyType' containerField='value'
                        name='keyType'
                        reference='http://titania.create3000.de'
                        value='"SPLINE", "SPLINE", "SPLINE"'/>
                  </MetadataSet>
                </PositionInterpolator>
              </Group>
              <Script DEF='pointSizeScript'>
                <field accessType='inputOnly' type='SFVec3f' name='set_translation'/>
                <field accessType='inputOutput' type='SFString' name='description' value='pointSize'/>
                <field accessType='inputOutput' type='SFFloat' name='minValue' value='1'/>
                <field accessType='inputOutput' type='SFFloat' name='maxValue' value='100'/>
                <field accessType='outputOnly' type='SFFloat' name='value_changed'/>
                <field accessType='outputOnly' type='MFString' name='string_changed'/>
                <field accessType='initializeOnly' type='SFInt32' name='currentValue' value='69'/>
<![CDATA[ecmascript:

function initialized ()
{
	set_value (value);
}

function set_translation (value)
{
	set_value (minValue + (value .x * (maxValue - minValue)));
}

function set_value (value)
{
	if (value == currentValue)
		return;

	currentValue   = value;
	value_changed  = value;
	string_changed [0] = description + " " + currentValue;
}]]> 
              </Script>
            </Group>
            <Script DEF='numParticlesScript'>
              <field accessType='inputOnly' type='SFVec3f' name='set_translation'/>
              <field accessType='inputOutput' type='SFString' name='description' value='numParticles'/>
              <field accessType='inputOutput' type='SFInt32' name='minValue' value='10'/>
              <field accessType='inputOutput' type='SFInt32' name='maxValue' value='500'/>
              <field accessType='outputOnly' type='SFInt32' name='value_changed'/>
              <field accessType='outputOnly' type='MFString' name='string_changed'/>
              <field accessType='initializeOnly' type='SFInt32' name='currentValue' value='100'/>
<![CDATA[ecmascript:

function initialized ()
{
	set_value (value);
}

function set_translation (value)
{
	set_value (minValue + (value .x * (maxValue - minValue)));
}

function set_value (value)
{
	if (value == currentValue)
		return;

	currentValue   = value;
	value_changed  = value;
	string_changed [0] = description + " " + currentValue;
}]]> 
            </Script>
            <Transform DEF='Rectangle2D_2'
                translation='-0.0729483 0 0'
                scale='0.027 0.0267372 0.0267372'>
              <Shape>
                <Appearance>
                  <Material/>
                </Appearance>
                <Rectangle2D/>
              </Shape>
              <TouchSensor DEF='_11'
                  description='Toggle Animation'/>
              <Script DEF='TogglePointSizeAnim'>
                <field accessType='inputOnly' type='SFTime' name='set_touchTime'/>
                <field accessType='initializeOnly' type='SFNode' name='timer'>
                  <TimeSensor USE='_10'/>
                </field>
<![CDATA[ecmascript:

function set_touchTime (value, time)
{
	if (timer .isActive)
	{
		if (timer .isPaused)
			timer .resumeTime = time;
		else
			timer .pauseTime = time;
	}
	else
		timer .startTime = time;
}]]> 
              </Script>
            </Transform>
          </Transform>
        </Group>
      </Layer>
    </LayerSet>
    <ROUTE fromNode='_5' fromField='time' toNode='BubblesScript' toField='set_time'/>
    <ROUTE fromNode='_7' fromField='translation_changed' toNode='Rectangle2D' toField='set_translation'/>
    <ROUTE fromNode='_7' fromField='translation_changed' toNode='numParticlesScript' toField='set_translation'/>
    <ROUTE fromNode='numParticlesScript' fromField='string_changed' toNode='_6' toField='set_string'/>
    <ROUTE fromNode='numParticlesScript' fromField='value_changed' toNode='BubblesScript' toField='set_numParticles'/>
    <ROUTE fromNode='_9' fromField='translation_changed' toNode='Rectangle2D_1' toField='set_translation'/>
    <ROUTE fromNode='_9' fromField='translation_changed' toNode='pointSizeScript' toField='set_translation'/>
    <ROUTE fromNode='pointSizeScript' fromField='string_changed' toNode='_8' toField='set_string'/>
    <ROUTE fromNode='pointSizeScript' fromField='value_changed' toNode='_2' toField='set_linewidthScaleFactor'/>
    <ROUTE fromNode='_10' fromField='fraction_changed' toNode='pointSizeScriptSet_translationInterpolator' toField='set_fraction'/>
    <ROUTE fromNode='pointSizeScriptSet_translationInterpolator' fromField='value_changed' toNode='pointSizeScript' toField='set_translation'/>
    <ROUTE fromNode='pointSizeScriptSet_translationInterpolator' fromField='value_changed' toNode='_9' toField='set_offset'/>
    <ROUTE fromNode='pointSizeScriptSet_translationInterpolator' fromField='value_changed' toNode='Rectangle2D_1' toField='set_translation'/>
    <ROUTE fromNode='_11' fromField='touchTime' toNode='TogglePointSizeAnim' toField='set_touchTime'/>
  </Scene>
</X3D>
